






<!doctype html>

<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="stylesheet" href="/_static/spectre.css">
<link rel="stylesheet" href="/_static/pygments.css">
<link rel="stylesheet" href="/_static/style.css">

<link rel="alternate" type="application/atom+xml" title="Atom feed" href="/_feed/index.xml" />

<link rel="icon" href="/_static/xo-system-icon.svg">
<link rel="apple-touch-icon" href="/_static/xo-system-icon.svg">







<title>death and gravity</title>



<meta property="og:title" content="death and gravity">
<meta property="og:site_name" content="death and gravity">
<meta property="og:type" content="website">
<meta property="og:url" content="https://death.andgravity.com/">




<script>
/* https://css-tricks.com/the-trick-to-viewport-units-on-mobile/ */
function set_vh() {
    let vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', `${vh}px`);
}
/* we do it once, now, *and* on every resize */
set_vh();
window.addEventListener('resize', set_vh);
</script>


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4RY2QR580X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', "G-4RY2QR580X");
</script>



<div class="main container grid-lg">


<header>
<nav>
<ul class="breadcrumb">

<li class="breadcrumb-item">&nbsp;

</ul>
</nav>

<h1 class="heading-index">death and gravity</h1>

<p class="text-gray text-nowrap">


</p>






</header>


<main class="content columns">
<div class="column col-sm-12 col-md-10 col-8">


<p>Hi, I'm <a href="/about">Adrian</a>.
Among other things,
I write about Python on the internet.</p>
<p>I also maintain <a href="https://github.com/lemon24/reader">reader</a>,
a Python feed reader library.</p>
<p>If you're new here, people seem to like these articles
(<a href="#articles">see more</a>):</p>
<ul>
<li>
    <a href="/same-arguments">When to use classes in Python? When your functions take the same arguments</a>
</li>

<li>
    <a href="/stdlib">Learn by reading code: Python standard library design decisions explained</a>
</li>

<li>
    <a href="/f-re">The unreasonable effectiveness of f‍-‍strings and re.VERBOSE</a>
</li>

<li>
    <a href="/query-builder-how">Write an SQL query builder in 150 lines of Python!</a>
</li>


</ul>
<form
    action="https://gmail.us7.list-manage.com/subscribe/post?u=9909b0e978d8d8d941bd3c8dc&amp;id=c61d63d661&SIGNUP=index"
    method="post"
    id="embedded-subscribe-form"
    name="mc-embedded-subscribe-form"
    target="_blank"
    novalidate
    class="panel subscribe-form"
>
    <div class="panel-header text-large">

        Want to know when new articles come out?

    </div>
    <div class="panel-body">

        <p>Drop your email in the box below and I'll send new stuff straight to your inbox!</p>

        <div class="form-group col-6 col-xs-12 col-md-9">
        <input type="text" name="FNAME" id="mce-FNAME"
            class="form-input input-lg"
            placeholder="Your first name"
        >
        </div>

        <div class="form-group col-6 col-xs-12 col-md-9">
        <input type="email" name="EMAIL" id="mce-EMAIL"
            class="form-input input-lg"
            placeholder="Your email address"
        >
        </div>

        <!-- bot prevention-->
        <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_9909b0e978d8d8d941bd3c8dc_c61d63d661" tabindex="-1" value=""></div>

    </div>
    <div class="panel-footer">

        <div class="form-group">
        <input type="submit"  name="subscribe" id="mc-embedded-subscribe"
            class="btn btn-primary btn-lg"
            value="Subscribe"
        >
        </div>

    </div>

</form>
<p><a id="articles"></a>
Here's a list of all the articles:</p>
<ul>
<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title">
            <a href="/output">Why you should still read the docs</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                nine minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>Do you feel you&#39;re fighting your tools? Do you feel you&#39;re relying too much on autocomplete and inline documentation? tl;dr: Most good documentation won&#39;t show up in your IDE – rather, it is about how to use the library, and the problem the library is solving.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title">
            <a href="/linesieve">Announcing linesieve 1.0: an unholy blend of grep, sed, awk, and Python, born out of spite</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                three minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>Java is notoriously verbose, especially when used in a serious Enterprise Project™ ...so naturally, I made linesieve, a Python text munging tool to split output into sections and match/sub/split with the full power of Python&#39;s re module.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title">
            <a href="/limit-concurrency">Limiting concurrency in Python asyncio: the story of async imap_unordered()</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                12 minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>So, you&#39;re doing some async stuff, repeatedly, hundreds of thousands of times. How do you *not* do it all at once? Hint: asyncio.Semaphore is not always the best way, despite what Stack Overflow may tell you ;)
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title">
            <a href="/yaml-unhashable-key">yaml: while constructing a mapping found unhashable key</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                five minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>... in which you&#39;ll find out what &#34;while constructing a mapping found unhashable key&#34; PyYAML errors mean, why do they happen, and what you can do about it.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title">
            <a href="/caching-methods">Caching a lot of methods in Python</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                six minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>... in which you&#39;ll learn how to cache a lot of methods in Python, even for objects created by someone else. Did you know that, contrary to popular belief, Python programmers can have a little monkey patching as a treat?
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title">
            <a href="/reader-3-4">reader 3.4 released – 5 years, 2000 commits</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                four minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>reader, my Python feed reader library, is 5 years old; since this is a special occasion, I thought I&#39;d share a few thoughts on the journey so far.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title very-popular">
            <a href="/pwned">Has your password been pwned? Or, how I almost failed to search a 37 GB text file in under 1 millisecond (in Python)</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                19 minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>... in which we check if your password has been compromised in many inconvenient ways, in a tale of destruction, obsession, and self-discovery.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title very-popular">
            <a href="/f-re">The unreasonable effectiveness of f‍-‍strings and re.VERBOSE</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                seven minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>... in which we look at one or two ways to make life easier when working with Python regular expressions.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title">
            <a href="/yaml-unknown-tag">yaml: could not determine a constructor for the tag</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                four minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>... in which you&#39;ll find out what &#34;could not determine a constructor for the tag&#34; PyYAML errors mean, why do they happen, and what you can do about it.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title popular">
            <a href="/any-yaml">Dealing with YAML with arbitrary tags in Python</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                10 minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>... in which we use PyYAML to safely read and write YAML with any tags, in a way that&#39;s as straightforward as interacting with built-in types.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title very-popular">
            <a href="/query-builder-how">Write an SQL query builder in 150 lines of Python!</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                20 minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>This is the fourth article in a series about writing my own SQL query builder. Today, we&#39;ll rewrite it from scratch, explore API design, learn when to be lazy, and look at worse and better ways of doing things – all in 150 lines of Python!
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title very-popular">
            <a href="/namedtuples">namedtuple in a post-dataclasses world</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                six minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>namedtuple has been around since forever, and over time, its convenience saw it used far outside its originally intended purpose. With dataclasses now covering part of those use cases, what should one use named tuples for? In this article, I address this question, and give a few examples from real code.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title">
            <a href="/own-query-builder">Why I wrote my own SQL query builder (in Python)</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                10 minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>This is the third article in a series about writing an SQL query builder in 150 lines of Python. Here, I talk about why I decided to write my own, the alternatives I considered, why I didn&#39;t use an existing library, and how I knew it wouldn&#39;t become a maintenance burden.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title">
            <a href="/more-arguments">When your functions take the same arguments, consider using a class: counter-examples</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                six minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>In this article, we look at a few real-world examples where functions taking the same arguments don&#39;t necessarily make a class, as counter-examples to a heuristic for using classes in Python.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title popular">
            <a href="/sentinels">Python sentinel objects, type hints, and PEP 661</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                seven minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>PEP 661 proposes adding a utility for defining sentinel values in the Python standard library. In this article, you&#39;ll get a PEP 661 summary, learn what sentinel objects are (with real-world examples), how to use them with type hints, and a bit about why PEPs exist in the first place.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title popular">
            <a href="/same-arguments">When to use classes in Python? When your functions take the same arguments</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                five minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>In this article, we look at a heuristic for using classes in Python, with examples from real-world code, and some things to keep in mind.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title">
            <a href="/query-builder-why">Why use an SQL query builder in the first place?</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                eight minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>This is the second article in a series about writing an SQL query builder in 150 lines of Python, why I wrote it, how I thought about it, and the decisions I had to make. In this article, I talk about why I needed a query builder in the first place, with examples derived from real use cases I had for my feed reader library.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title">
            <a href="/query-builder">SQL query builder in 150 lines of Python</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                two minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>In this series, we examine an SQL query builder I wrote in 150 lines of Python, why I wrote it, how I thought about it, and the decisions I had to make. This article is a sneak peek of the series and the code.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title">
            <a href="/run-sh">Using a Makefile with .PHONY-only targets? Use a run.sh script instead</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                four minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>... in which we look at an interesting alternative to Makefiles with .PHONY-only targets, and why I think it&#39;s cool.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title">
            <a href="/hashlib-buffer-required">hashlib: object supporting the buffer API required</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                three minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>In this article, you&#39;ll find out what Python hashlib &#34;object supporting the buffer API required&#34; TypeErrors mean, why do they happen, and what you can do about it.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title very-popular">
            <a href="/stdlib">Learn by reading code: Python standard library design decisions explained</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                five minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>On your Python learning journey, you may have heard that a great way to get better is to read code written by other people. That&#39;s true, but finding good code to study is not easy, mostly because the design philosophy and the reasoning behind the code are rarely documented. The Python standard library is special in this regard: not only is the code open source, but the discussions around the design decisions are public, too.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title">
            <a href="/dataclasses">Dataclasses without type annotations</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                six minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>... in which we talk about the many ways of using Python dataclasses without type annotations (or even variable annotations!), and what this says about Python.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title">
            <a href="/stable-hashing">Deterministic hashing of Python data objects</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                10 minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>In this article, you&#39;ll learn how to calculate deterministic hashes for arbitrary Python data objects, stable across interpreter versions and implementations.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title very-popular">
            <a href="/aosa">Struggling to structure code in larger programs? Great resources a beginner might not find so easily</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                four minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>Are you having trouble making the modules work together in a larger project? Have you tried looking at popular projects as models, but were put off by their size and scope, or found it hard to see why they did the things they did? Resources about this do exist, but they&#39;re scattered all over, and might be hard to find for someone early in their programming journey.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title">
            <a href="/fast-conway-cubes">Optimizing Advent of Code 2020 day 17</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                13 minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>... in which we optimize our Advent of Code 2020 day 17 (Conway Cubes) solution, focusing on profiling and optimizing existing code, in a way that helps you translate those skills to your regular, non-puzzle coding. With a touch of code generation and some help from PyPy, we end up with a 65x improvement.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <span class="text-large article-list-title">
            <a href="/conway-cubes">Solving Advent of Code 2020 day 17 by not solving it</a>
            </span>&ensp;<small class="text-gray text-nowrap">
                16 minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>... in which we solve the day 17 problem from Advent of Code 2020, Conway Cubes, in a generic way, focusing on testing, refactoring, and idiomatic Python, in a way that helps you translate those skills to your regular, non-puzzle coding.
    </div>
</li>


</ul>
<p><a id="release-notes"></a>
Every once in a while,
I summarize the latest <a href="https://github.com/lemon24/reader">reader</a> changes here:</p>
<ul>
<li>
    <a href="/reader-3-4">reader 3.4 released – 5 years, 2000 commits</a>
</li>

<li>
    <a href="/reader-3-0">reader 3.0 released</a>
</li>

<li>
    <a href="/reader-2-14">reader 2.14 released</a>
</li>

<li>
    <a href="/reader-2-11">reader 2.11 released</a>
</li>

<li>
    <a href="/reader-2-5">reader 2.5 released</a>
</li>

<li>
    <a href="/reader-2-0">reader 2.0 released</a>
</li>


</ul>














</div>
</main>


<footer class="footer">
<p class="text-gray">
<a href="/">home</a>
∙ <a href="/_feed/index.xml">feed</a>
∙ <a href="/about">about</a>

∙ © 2021 lemon24



</footer>


</div>