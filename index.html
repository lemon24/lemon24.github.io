






<!doctype html>

<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="stylesheet" href="/_static/spectre.css">
<link rel="stylesheet" href="/_static/pygments.css">
<link rel="stylesheet" href="/_static/style.css">

<link rel="alternate" type="application/atom+xml" title="Atom feed" href="/_feed/index.xml" />







<title>death and gravity</title>




<script>
/* https://css-tricks.com/the-trick-to-viewport-units-on-mobile/ */
function set_vh() {
    let vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', `${vh}px`);
}
/* we do it once, now, *and* on every resize */
set_vh();
window.addEventListener('resize', set_vh);
</script>


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4RY2QR580X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', "G-4RY2QR580X");
</script>



<div class="main container grid-lg">


<header>
<nav>
<ul class="breadcrumb">

<li class="breadcrumb-item">&nbsp;

</ul>
</nav>

<h1 class="heading-index">death and gravity</h1>

<p class="text-gray text-nowrap"><small>





</small></p>






</header>


<main class="content columns">
<div class="column col-sm-12 col-md-10 col-8">


<p>Hi, I'm <a href="/about">Adrian</a>. Among other things, I write about Python on the internet.</p>
<p>If you're new here, people seem to like these articles:</p>
<ul>
<li>
    <a href="/stdlib">Learn by reading code: Python standard library design decisions explained (for advanced beginners)</a>
</li>

<li>
    <a href="/aosa">Struggling to structure code in larger programs? Great resources a beginner might not find so easily</a>
</li>

<li>
    <a href="/same-arguments">When to use classes in Python? When your functions take the same arguments</a>
</li>

<li>
    <a href="/query-builder-how">Write an SQL query builder in 150 lines of Python!</a>
</li>


</ul>
<form
    action="https://gmail.us7.list-manage.com/subscribe/post?u=9909b0e978d8d8d941bd3c8dc&amp;id=c61d63d661&SIGNUP=index"
    method="post"
    id="embedded-subscribe-form"
    name="mc-embedded-subscribe-form"
    target="_blank"
    novalidate
    class="panel subscribe-form"
>
    <div class="panel-header text-large">

        Want to know when new articles come out?

    </div>
    <div class="panel-body">

        <p>Drop your email in the box below and I'll send new stuff straight to your inbox!</p>

        <div class="form-group col-6 col-xs-12 col-md-9">
        <input type="text" name="FNAME" id="mce-FNAME"
            class="form-input input-lg"
            placeholder="Your first name"
        >
        </div>

        <div class="form-group col-6 col-xs-12 col-md-9">
        <input type="email" name="EMAIL" id="mce-EMAIL"
            class="form-input input-lg"
            placeholder="Your email address"
        >
        </div>

        <!-- bot prevention-->
        <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_9909b0e978d8d8d941bd3c8dc_c61d63d661" tabindex="-1" value=""></div>

    </div>
    <div class="panel-footer">

        <div class="form-group">
        <input type="submit"  name="subscribe" id="mc-embedded-subscribe"
            class="btn btn-primary btn-lg"
            value="Subscribe"
        >
        </div>

    </div>

</form>
<p>Here's a list of all the articles:</p>
<ul>
<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <a href="/f-re" class="text-large">The unreasonable effectiveness of f‍-‍strings and re.VERBOSE</a>&ensp;<small class="text-gray text-nowrap">
                six minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>... in which we look at one or two ways to make life easier when working regular expressions in Python.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <a href="/yaml-unknown-tag" class="text-large">yaml: could not determine a constructor for the tag</a>&ensp;<small class="text-gray text-nowrap">
                four minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>... in which you&#39;ll find out what &#34;could not determine a constructor for the tag&#34; PyYAML errors mean, why do they happen, and what you can do about it.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <a href="/any-yaml" class="text-large">Dealing with YAML with arbitrary tags in Python</a>&ensp;<small class="text-gray text-nowrap">
                10 minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>... in which we use PyYAML to safely read and write YAML with any tags, in a way that&#39;s as straightforward as interacting with built-in types.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <a href="/query-builder-how" class="text-large">Write an SQL query builder in 150 lines of Python!</a>&ensp;<small class="text-gray text-nowrap">
                20 minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>This is the fourth article in a series about writing my own SQL query builder. Today, we&#39;ll rewrite it from scratch, explore API design, learn when to be lazy, and look at worse and better ways of doing things – all in 150 lines of Python!
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <a href="/namedtuples" class="text-large">namedtuple in a post-dataclasses world</a>&ensp;<small class="text-gray text-nowrap">
                six minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>namedtuple has been around since forever, and over time, its convenience saw it used far outside its originally intended purpose. With dataclasses now covering part of those use cases, what should one use named tuples for? In this article, I address this question, and give a few examples from real code.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <a href="/own-query-builder" class="text-large">Why I wrote my own SQL query builder (in Python)</a>&ensp;<small class="text-gray text-nowrap">
                10 minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>This is the third article in a series about writing an SQL query builder in 150 lines of Python. Here, I talk about why I decided to write my own, the alternatives I considered, why I didn&#39;t use an existing library, and how I knew it wouldn&#39;t become a maintenance burden.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <a href="/more-arguments" class="text-large">When your functions take the same arguments, consider using a class: counter-examples</a>&ensp;<small class="text-gray text-nowrap">
                six minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>In this article, we look at a few real-world examples where functions taking the same arguments don&#39;t necessarily make a class, as counter-examples to a heuristic for using classes in Python.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <a href="/sentinels" class="text-large">Python sentinel objects, type hints, and PEP 661</a>&ensp;<small class="text-gray text-nowrap">
                seven minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>PEP 661 proposes adding a utility for defining sentinel values in the Python standard library. In this article, you&#39;ll get a PEP 661 summary, learn what sentinel objects are (with real-world examples), how to use them with type hints, and a bit about why PEPs exist in the first place.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <a href="/same-arguments" class="text-large">When to use classes in Python? When your functions take the same arguments</a>&ensp;<small class="text-gray text-nowrap">
                five minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>In this article, we look at a heuristic for using classes in Python, with examples from real-world code, and some things to keep in mind.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <a href="/query-builder-why" class="text-large">Why use an SQL query builder in the first place?</a>&ensp;<small class="text-gray text-nowrap">
                eight minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>This is the second article in a series about writing an SQL query builder in 150 lines of Python, why I wrote it, how I thought about it, and the decisions I had to make. In this article, I talk about why I needed a query builder in the first place, with examples derived from real use cases I had for my feed reader library.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <a href="/query-builder" class="text-large">SQL query builder in 150 lines of Python</a>&ensp;<small class="text-gray text-nowrap">
                two minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>In this series, we examine an SQL query builder I wrote in 150 lines of Python, why I wrote it, how I thought about it, and the decisions I had to make. This article is a sneak peek of the series and the code.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <a href="/run-sh" class="text-large">Using a Makefile with .PHONY-only targets? Use a run.sh script instead</a>&ensp;<small class="text-gray text-nowrap">
                four minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>... in which we look at an interesting alternative to Makefiles with .PHONY-only targets, and why I think it&#39;s cool.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <a href="/hashlib-buffer-required" class="text-large">hashlib: object supporting the buffer API required</a>&ensp;<small class="text-gray text-nowrap">
                three minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>In this article, you&#39;ll find out what Python hashlib &#34;object supporting the buffer API required&#34; TypeErrors mean, why do they happen, and what you can do about it.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <a href="/stdlib" class="text-large">Learn by reading code: Python standard library design decisions explained (for advanced beginners)</a>&ensp;<small class="text-gray text-nowrap">
                five minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>On your Python learning journey, you may have heard that a great way to get better is to read code written by other people. That&#39;s true, but finding good code to study is not easy, mostly because the design philosophy and the reasoning behind the code are rarely documented. The Python standard library is special in this regard: not only is the code open source, but the discussions around the design decisions are public, too.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <a href="/dataclasses" class="text-large">Dataclasses without type annotations</a>&ensp;<small class="text-gray text-nowrap">
                six minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>... in which we talk about the many ways of using Python dataclasses without type annotations (or even variable annotations!), and what this says about Python.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <a href="/stable-hashing" class="text-large">Deterministic hashing of Python data objects</a>&ensp;<small class="text-gray text-nowrap">
                10 minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>In this article, you&#39;ll learn how to calculate deterministic hashes for arbitrary Python data objects, stable across interpreter versions and implementations.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <a href="/aosa" class="text-large">Struggling to structure code in larger programs? Great resources a beginner might not find so easily</a>&ensp;<small class="text-gray text-nowrap">
                four minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>Are you having trouble making the modules work together in a larger project? Have you tried looking at popular projects as models, but were put off by their size and scope, or found it hard to see why they did the things they did? Resources about this do exist, but they&#39;re scattered all over, and might be hard to find for someone early in their programming journey.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <a href="/fast-conway-cubes" class="text-large">Optimizing Advent of Code 2020 day 17</a>&ensp;<small class="text-gray text-nowrap">
                13 minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>... in which we optimize our Advent of Code 2020 day 17 (Conway Cubes) solution, focusing on profiling and optimizing existing code, in a way that helps you translate those skills to your regular, non-puzzle coding. With a touch of code generation and some help from PyPy, we end up with a 65x improvement.
    </div>
</li>

<li class="panel">
    <div class="panel-header">
        <div class="panel-title">
            <a href="/conway-cubes" class="text-large">Solving Advent of Code 2020 day 17 by not solving it</a>&ensp;<small class="text-gray text-nowrap">
                16 minute read
            </small>
        </div>
    </div>
    <div class="panel-body">
        <p>... in which we solve the day 17 problem from Advent of Code 2020, Conway Cubes, in a generic way, focusing on testing, refactoring, and idiomatic Python, in a way that helps you translate those skills to your regular, non-puzzle coding.
    </div>
</li>


</ul>
<p>I also maintain <a href="https://github.com/lemon24/reader">reader</a>, a Python feed reader library.
Every once in a while, I summarize the latest changes here:</p>
<ul>
<li>
    <a href="/reader-2-11">reader 2.11 released</a>
</li>

<li>
    <a href="/reader-2-5">reader 2.5 released</a>
</li>

<li>
    <a href="/reader-2-0">reader 2.0 released</a>
</li>


</ul>














</div>
</main>


<footer class="footer">
<p class="text-gray">
<a href="/">home</a>
∙ <a href="/_feed/index.xml">feed</a>
∙ <a href="/about">about</a>

∙ © 2021 lemon24



</footer>


</div>