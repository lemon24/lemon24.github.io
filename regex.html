






<!doctype html>

<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="stylesheet" href="/_static/spectre.css">
<link rel="stylesheet" href="/_static/pygments.css">
<link rel="stylesheet" href="/_static/style.css">

<link rel="alternate" type="application/atom+xml" title="Atom feed" href="/_feed/index.xml" />







<title>Using f-strings with re.VERBOSE for better Python regular expressions - death and gravity</title>




<script>
/* https://css-tricks.com/the-trick-to-viewport-units-on-mobile/ */
function set_vh() {
    let vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', `${vh}px`);
}
/* we do it once, now, *and* on every resize */
set_vh();
window.addEventListener('resize', set_vh);
</script>





<div class="main container grid-lg">


<header>
<nav>
<ul class="breadcrumb">

<li class="breadcrumb-item">
    <a href="/">death and gravity</a>
</li>

</ul>
</nav>

<h1 class="heading-noindex">Using f-strings with re.VERBOSE for better Python regular expressions</h1>

<p class="text-gray"><small>
<span class="tooltip" data-tooltip="published on 2021-11-24">November 2021</span>



∙ one minute read


</small></p>






</header>


<main class="content columns">
<div class="column col-sm-12 col-md-10 col-8">

<!-- candidate slug: f-regex, f-pattern, f-re, ... -->
<p>... in which ... TODO</p>
<h2 id="intro">intro<span class="headerlink"> <a href="#intro" title="permalink">#</a></span></h2>
<ul>
<li>something cool that's not necessarily obvious, but makes life way easier</li>
<li>f strings, since 3.6<ul>
<li>example</li>
</ul>
</li>
<li>re.VERBOSE, since forever<ul>
<li>example</li>
</ul>
</li>
<li>synergy! (maybe add synergy meme)<ul>
<li>tiny example</li>
</ul>
</li>
</ul>
<h2 id="worked-example">worked example<span class="headerlink"> <a href="#worked-example" title="permalink">#</a></span></h2>
<ul>
<li>https://en.wikipedia.org/wiki/GHS_hazard_statements</li>
<li>get them from some kind of OCR thing (textract, or smth else)</li>
<li>format, from the wiki page<ul>
<li>H200: Unstable explosive</li>
<li>H313+H333: May be harmful in contact with skin or if inhaled</li>
<li>H361f: Suspected of damaging fertility</li>
<li>EUH014: Reacts violently with water</li>
<li>AUH014: Reacts violently with water</li>
</ul>
</li>
<li>variations (text doesnt follow the format 100%, ocr isn't perfect)<ul>
<li>not on a single line</li>
<li>no colon &quot;H123 message&quot;</li>
<li>parens &quot;(H123) message&quot;, sometimes mismatched &quot;(H123 message&quot;</li>
<li>weird spacing &quot;  H1+ H2    +H4 whatever&quot;</li>
<li>&quot;H6 word; see also H2; H7 another&quot;</li>
</ul>
</li>
</ul>
<p>TODO: how do we build up to the final thing? should redo the example from scratch...</p>
<h2 id="caveats">caveats<span class="headerlink"> <a href="#caveats" title="permalink">#</a></span></h2>
<ul>
<li>can't use # (exceptions: char ranges)<ul>
<li>also, need newline after comments</li>
</ul>
</li>
<li>need to use double {{}}<ul>
<li>if pressing, might be solved with <a href="https://docs.python.org/3/library/string.html#template-strings">template strings</a> and custom patterns for the placeholder</li>
</ul>
</li>
</ul>








</div>
</main>


<footer class="footer">
<p class="text-gray">
<a href="/">home</a>
∙ <a href="/_feed/index.xml">feed</a>
∙ <a href="/about">about</a>

∙ © 2021 lemon24



</footer>


</div>