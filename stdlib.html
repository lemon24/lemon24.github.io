<!doctype html>

<meta name="viewport" content="width=device-width" />


<link rel="stylesheet" href="/_static/spectre.css">
<link rel="stylesheet" href="/_static/pygments.css">
<link rel="stylesheet" href="/_static/style.css">

<link rel="alternate" type="application/atom+xml" title="Atom feed" href="/_feed/index.xml" />






<title>untitled - death and gravity</title>


<script>
/* https://css-tricks.com/the-trick-to-viewport-units-on-mobile/ */
function set_vh() {
    let vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', `${vh}px`);
}
/* we do it once, now, *and* on every resize */
set_vh();
window.addEventListener('resize', set_vh);
</script>





<div class="main container grid-lg">


<header>
<nav>
<ul class="breadcrumb">

<li class="breadcrumb-item">
    <a href="/">death and gravity</a>
</li>

</ul>
</nav>

<h1>untitled</h1>

<p class="text-gray"><small>





</small></p>

</header>


<main class="content columns">
<div class="column col-sm-12 col-md-10 col-8">

<p>So, you're an advanced beginner – you've learned your way past Python basics and can solve real problems.</p>
<p>You've now moved past tutorials and blog posts;
maybe you feel they offer one-dimensional solutions to simple, made-up problems;
maybe instead of solving this specific problem, you want to get better at solving problems in general;</p>
<p>You may have heard that you have to develop an eye by reading and writing a lot of code. It's true.</p>
<p>So, what code should you read?</p>
<p>&quot;Just read what you like.&quot;</p>
<p>What if you don't know what you like? What if you don't like the right thing?
After all, you have to have an eye for that ...and that's what you're trying to develop in the first place.</p>
<p>&quot;There are so many projects on GitHub – pick one you like and see how they did it.&quot;</p>
<p>But most successful projects are quite large; where do you start from?</p>
<p>And even if you knew where to start,
<em>how they did it</em> isn't always obvious;
the code is right there, but it doesn't really tell you
<em>why</em> they did it,
what they <em>didn't</em> do,
nor how they thought about the whole thing.</p>
<p>In other words, from the code itself it's not obvious what the design philosophy was and what choices were considered before settling on an implementation.</p>
<p>In this article, we'll look at some Python standard library modules where you can have all of that.</p>
<h2 id="the-standard-library">the standard library<span class="headerlink"> <a href="#the-standard-library" title="permalink">#</a></span></h2>
<p>As a whole, the Python standard library isn't great for learning &quot;good&quot; style:
while they are all useful, the style isn't uniform;
some of the modules are very old (and pythonic was different 10-20 years ago)
they have different authors,
and have to mostly preserve backwards compatibility
(meaning they can't get better either).</p>
<p>On the other hand, the newer ones have a more consistent style,
have detailed PEPs explaining what the design tradeoffs were
some took inspiration from mature third party libraries.</p>
<p>It's some of the latter ones we'll look at.</p>
<section class="admonition note">
<div class="admonition-text">
<p>Style aside, there's a lot to learn from all of them, since they all solve real problems. It's especially interesting/educative to look at the differences between stdlib stuff and external newer alternatives – the gap between them means there was a perceived deficiency in the stdlib (otherwise they wouldn't have bothered with the new thing); an example of this is urllib vs requests.</p>
</div>
</section>
<h2 id="how-to-read-these">how to read these<span class="headerlink"> <a href="#how-to-read-these" title="permalink">#</a></span></h2>
<ul>
<li>get familiar with them as a user</li>
<li>read the pep; for some of them, it's also in the docs; some sections, important ones, aren't; I'll point them out<ul>
<li>abstract, rationale, design decisions, discussion, rejected ideas</li>
</ul>
</li>
<li>read the code; it's linked from the module doc</li>
</ul>
<h2 id="dataclasses">dataclasses<span class="headerlink"> <a href="#dataclasses" title="permalink">#</a></span></h2>
<p>The <a href="https://docs.python.org/3/library/dataclasses.html">dataclasses</a> standard library module
reduces the boilerplate of writing classes
by generating special methods like <code>__init__</code> and <code>__repr__</code>.</p>
<p>See <a href="https://realpython.com/python-data-classes/">this tutorial</a> for a gentler introduction.</p>
<p>It was introduced in <a href="https://www.python.org/dev/peps/pep-0557/">PEP 557</a>, as a simpler version of <a href="https://www.attrs.org/en/stable/why.html#data-classes">attrs</a>.
The specificiation section is similar to the documentation;
see rationale, discussion, rejected ideas for extra stuff.</p>
<p>The code itself is extremely well commented;
particularly interesting is its use of <a href="https://www.hillelwayne.com/decision-tables/">decision tables</a>
(<a href="https://github.com/python/cpython/blob/3.9/Lib/dataclasses.py#L119">table</a>,
<a href="https://github.com/python/cpython/blob/3.9/Lib/dataclasses.py#L788">code</a>,
<a href="https://bugs.python.org/issue32929#msg312829">nested if version</a>).</p>
<p>It is also a great example of metaprogramming.
Raymond Hettinger has a great talk about it:
Dataclasses: The code generator to end all code generators
(<a href="https://www.youtube.com/watch?v=T-TwcmT6Rcw">video</a>,
slides:
<a href="https://www.dropbox.com/s/te4q0xf46zkuu21/hettinger_dataclasses_pycon_2018.zip">zipped-up HTML zip</a>,
<a href="https://www.dropbox.com/s/m8pwkkz43qz5pgt/HettingerPycon2018.pdf">PDF</a>).
TODO: why is it great, what the focus is</p>
<h2 id="pathlib">pathlib<span class="headerlink"> <a href="#pathlib" title="permalink">#</a></span></h2>
<p>The <a href="https://docs.python.org/3/library/pathlib.html">pathlib</a> module provides a simple hierarchy of classes
to handle filesystem paths;
it is a high level alternative to <a href="https://docs.python.org/3/library/os.path.html">os.path</a>.</p>
<p>It was introduced in <a href="https://www.python.org/dev/peps/pep-0428/">PEP 428</a>;
while it does specify things, it is not exhaustive (the code is);
instead, most of the examples serve to illustrate the underlying philosophy.</p>
<p>This libary is a good read for a few reasons:</p>
<ul>
<li><p>It's likely you are already at least a bit familiar with the subject matter.
If you haven't used pathlib directly, you may have used os.path.</p>
</li>
<li><p>It is a good example of object-oriented solution.
It shows how you can use object oriented programming
on abstract (and invented) concepts,
to achieve better code structure and reuse;
in this, it departs from the tired Animal—Cat—Dog—speak() examples.</p>
</li>
<li><p>It is a good subject for comparative study;
both pathlib and os.path offer the same functionality in vastly different styles.
Also, there was another proposal all the way back in 2006 that was rejected (<a href="https://www.python.org/dev/peps/pep-0355/">PEP 355</a>),
and there are at least 5 other object oriented filesystem path libraries out there.
pathlib learns from all of them.</p>
</li>
</ul>
<h2 id="statistics">statistics<span class="headerlink"> <a href="#statistics" title="permalink">#</a></span></h2>
<p>The <a href="https://docs.python.org/3/library/statistics.html">statistics</a> module adds statistical functions to the standard library;
it's not intended to be a competitor libraries like NumPy,
but is rather &quot;aimed at the level of graphing and scientific calculators&quot;.</p>
<p>It was introduced in <a href="https://www.python.org/dev/peps/pep-0450/">PEP 450</a>.
Even if you are not familiar with the subject matter,
it is a very interesting read.</p>
<ul>
<li>The rationale section compares the proposal with NumPy,
or do-it-yourself solutions;
it's particularly good at showing <em>what</em> and <em>why</em>
something is added to the standard library.</li>
<li>There's also a design decision section,
which makes explicit what the general design philosophy was.
The discussion and FAQ section also has some interesting details.</li>
</ul>
<p>The documentation of the module is also very nice.
This is by design; as the PEP says,
&quot;Plenty of documentation,
aimed at readers who understand the basic concepts but may not know
(for example) which variance they should use [...]
But avoid going into tedious mathematical detail.&quot;</p>
<p>The code is relatively simple, and when it's not,
there are comments and links to detailed explanations or papers.
You <em>may</em> find this useful
if you're learning about this stuff and
find it easier to read code than maths notation.</p>
<h2 id="bonus-graphlib">bonus: graphlib<span class="headerlink"> <a href="#bonus-graphlib" title="permalink">#</a></span></h2>
<p><a href="https://docs.python.org/3/library/graphlib.html">graphlib</a> was added in Python 3.9, and at the moment contains just one thing:
an implementation of a topological sort of a graph
(here's a <a href="https://runestone.academy/runestone/books/published/pythonds3/Graphs/TopologicalSorting.html">refresher</a> on what it is and how it's useful).</p>
<p>This doesn't come with a PEP (most likely because it's so small);
it does however have an <a href="https://bugs.python.org/issue17005">issue</a> started by the great Raymond Hettinger,
with lots of comments from other core developers, 
including Tim Peters of Zen of Python fame.</p>
<p>Since this is essentially a solved problem, 
most of the discussion focuses on the API instead: 
where to put it, how to represent the input graph, 
how to make it both easy and flexible to use.</p>
<p>A thing they're trying to reconcile is that there are essentially two APIs:</p>
<ul>
<li>one for &quot;I have a full graph, give me the sorted nodes&quot; (<code>static_order()</code>)</li>
<li>one (proposed by Tim Peters) for &quot;I have <em>some</em> nodes,</li>
</ul>
<hr />
<ul>
<li><p>unlike pep, this is a live replay of the discussion; interesting to see things evolve, and don't dust appear fully formed</p>
</li>
<li><p>static order vs the richer API</p>
</li>
<li><p>really small as well 107 stmts</p>
</li>
</ul>







</div>
</main>


<footer class="footer">
<p class="text-gray">
<a href="/">home</a>
∙ <a href="/_feed/index.xml">feed</a>
∙ <a href="/about">about</a>

∙ © 2021 lemon24
</footer>


</div>